@import "normalise.css" layer(normalise);

@layer normalise, base, typography;

@layer base {
    :root {
        color-scheme: only dark;
        interpolate-size: allow-keywords;

        --bg: oklch(0.1776 0 0);
        --fg: oklch(1 0 0);
        --container: oklch(0.209 0 0);
        --container-stroke: oklch(0.2727 0 0);

        --spring-easing: linear(
            0,
            0.009,
            0.035 2.1%,
            0.141,
            0.281 6.7%,
            0.723 12.9%,
            0.938 16.7%,
            1.017,
            1.077,
            1.121,
            1.149 24.3%,
            1.159,
            1.163,
            1.161,
            1.154 29.9%,
            1.129 32.8%,
            1.051 39.6%,
            1.017 43.1%,
            0.991,
            0.977 51%,
            0.974 53.8%,
            0.975 57.1%,
            0.997 69.8%,
            1.003 76.9%,
            1.004 83.8%,
            1
        );
        --spring-duration: 0.7s;
    }

    *,
    *:after,
    *:before {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    html,
    body {
        margin: 0;
        width: 100%;
        min-height: 100svh;
    }

    body {
        overflow-x: hidden;

        background-color: var(--bg);
        color: var(--fg);

        font-family: var(--jetbrains-mono);
    }

    p {
        text-wrap: pretty;
        hyphens: auto;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        text-wrap: balance;
    }

    @view-transition {
        navigation: auto;
    }

    @media (prefers-reduced-motion) {
        ::view-transition-group(*),
        ::view-transition-old(*),
        ::view-transition-new(*) {
            animation: none !important;
        }
    }
}

@layer typography {
    :where(p, a) {
        margin: 0;
        font-size: 12px;
        font-weight: 300;
        line-height: 1.5;
        color: var(--fg);
    }

    :where(h1) {
        margin: 0;
        font-size: 32px;
        font-weight: 300;
        text-transform: uppercase;
    }

    :where(h2) {
        margin: 0;
        font-size: 24px;
        font-weight: 300;
        text-transform: uppercase;
    }

    :where(h3) {
        margin: 0;
        font-size: 16px;
        font-weight: 300;
        text-transform: uppercase;
    }

    .prose {
        & h1 {
            margin-block: 12px;
            font-size: 32px;
            font-weight: 300;
            text-transform: uppercase;
        }

        & h2 {
            margin-block: 12px;
            font-size: 24px;
            font-weight: 300;
            text-transform: uppercase;
        }

        & h3 {
            margin-block: 4px;
            font-size: 16px;
            font-weight: 300;
            text-transform: uppercase;
        }

        & p {
            margin: 0;
            font-size: 14px;
            line-height: 1.5;

            &:has(+ p) {
                margin-bottom: 12px;
            }

            &:has(+ :is(h1, h2, h3, h4, h5, h6)) {
                margin-bottom: 32px;
            }
        }

        & a {
            font: inherit;
            color: var(--fg);
        }

        & img {
            border-radius: 18px;
        }
    }
}
