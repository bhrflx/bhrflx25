---
interface Props {
    key: string;
    code: string;
}

const { key, code } = Astro.props;
---

<div class="key sides" aria-hidden data-code={code}>
    <div class="highlight">
        <div class="top">
            <span>{key}</span>
        </div>
    </div>
</div>

<script>
    const keys = document.querySelectorAll("div.key");

    document.addEventListener("keydown", (e) => {
        keys.forEach((key) => {
            if (key instanceof HTMLElement) {
                const keyCode = key.dataset.code;

                if (e.code === keyCode) {
                    key.classList.add("pressed");
                }
            }
        });
    });

    document.addEventListener("keyup", () => {
        keys.forEach((key) => {
            key.classList.remove("pressed");
        });
    });
</script>

<style>
    .sides {
        width: 26px;
        height: 26px;
        padding: 2px;

        display: flex;
        align-items: center;
        justify-content: center;

        border-radius: 6px;
        background: linear-gradient(
            47deg,
            oklch(0 0 0) 15%,
            oklch(0.5208 0 0) 85%
        );
        box-shadow: 0 2px 10px oklch(0 0 0 / 1);
        transition: scale var(--spring-duration) var(--spring-easing);

        opacity: 0.5;
    }

    .pressed {
        scale: 0.8;
    }

    .highlight {
        width: 100%;
        height: 100%;
        padding: 1px;

        display: flex;
        align-items: center;
        justify-content: center;

        border-radius: 4px;
        background: linear-gradient(
            300deg,
            oklch(0.5103 0 0) 0%,
            oklch(0.7731 0 0) 50%,
            oklch(0.2768 0 0) 100%
        );
    }

    .top {
        width: 100%;
        height: 100%;

        display: flex;
        align-items: center;
        justify-content: center;

        border-radius: 3px;
        background: linear-gradient(
            208deg,
            oklch(0.3715 0 0) 9%,
            oklch(0.7252 0 0) 93%
        );
    }

    span {
        text-box: trim-both cap alphabetic;
        font-size: 14px;
        color: var(--fg);
    }

    @media (hover: none) and (pointer: coarse) {
        .key {
            display: none;
        }
    }
</style>
